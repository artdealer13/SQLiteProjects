# üìä –ó–∞–¥–∞–Ω–∏–µ 2: –¢—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫

## –û–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏–≤—ã—á–µ–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **CRUD –¥–ª—è –ø—Ä–∏–≤—ã—á–µ–∫**
   - ‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–µ–º
   - üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏–≤—ã—á–∫–µ
   - üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π
   - ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫

2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**
   - ‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞ –¥–µ–Ω—å
   - üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫
   - üîÑ –†–∞–±–æ—Ç–∞ —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã**
   - üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ/–≤—Å–µ–≥–æ, –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞)
   - üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü
   - üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –ø—Ä–∏–≤—ã—á–∫–∞–º
   - üî• –°–∞–º—ã–µ –¥–ª–∏–Ω–Ω—ã–µ —Å–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (streak tracking)
   - üö® –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∏–≤—ã—á–∫–∞—Ö, –Ω–µ –≤—ã–ø–æ–ª–Ω—è–≤—à–∏—Ö—Å—è 2+ –¥–Ω—è

4. **–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (–±–µ–π–¥–∂–∏)**
   - üéØ –ù–µ–¥–µ–ª—è—á (7 –¥–Ω–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
   - üèÜ –ú–µ—Å—è—á–Ω–∏–∫ (30 –¥–Ω–µ–π)
   - üíØ –°—Ç–æ–ª–µ—Ç–∏–µ (100 –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π)

5. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**
   - üíæ –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫
CREATE TABLE habits (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    description TEXT,
    category TEXT,
    frequency TEXT DEFAULT 'daily',
    target_time TEXT,
    created_at TIMESTAMP,
    is_active INTEGER DEFAULT 1
)

-- –¢–∞–±–ª–∏—Ü–∞ –ª–æ–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
CREATE TABLE habit_logs (
    id INTEGER PRIMARY KEY,
    habit_id INTEGER,
    log_date TEXT NOT NULL,
    completed INTEGER DEFAULT 0,
    note TEXT,
    UNIQUE(habit_id, log_date),
    FOREIGN KEY (habit_id) REFERENCES habits(id)
)

-- –¢–∞–±–ª–∏—Ü–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
CREATE TABLE achievements (
    id INTEGER PRIMARY KEY,
    habit_id INTEGER,
    badge_name TEXT,
    description TEXT,
    achieved_at TIMESTAMP,
    FOREIGN KEY (habit_id) REFERENCES habits(id)
)
```

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ SQL —Ñ—É–Ω–∫—Ü–∏–∏

‚úì **DATE()** - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏  
‚úì **julianday()** - —Ä–∞—Å—á—ë—Ç —Ä–∞–∑–Ω–∏—Ü—ã –≤ –¥–Ω—è—Ö  
‚úì **JOIN** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –ª–æ–≥–æ–≤  
‚úì **COUNT, SUM, AVG** - –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏  
‚úì **ROW_NUMBER() OVER** - –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–µ—Ä–∏–π  
‚úì **ON CONFLICT** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏  

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
cd task2_habits
python3 habit_tracker.py
```

## –ü—Ä–∏–º–µ—Ä—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
```
–ú–µ–Ω—é ‚Üí –û–ø—Ü–∏—è 1
–ù–∞–∑–≤–∞–Ω–∏–µ: –ó–∞—Ä—è–¥–∫–∞
–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –°–ø–æ—Ä—Ç
–û–ø–∏—Å–∞–Ω–∏–µ: 20 –º–∏–Ω—É—Ç —É—Ç—Ä–µ–Ω–Ω–µ–π –∑–∞—Ä—è–¥–∫–∏
–ß–∞—Å—Ç–æ—Ç–∞: daily
–í—Ä–µ–º—è: 07:00
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```
–ú–µ–Ω—é ‚Üí –û–ø—Ü–∏—è 5
ID –ø—Ä–∏–≤—ã—á–∫–∏: 1
–ó–∞–º–µ—Ç–∫–∞: –•–æ—Ä–æ—à–æ –ø–æ—Ç–∞–Ω—Ü–µ–≤–∞–ª —Å–µ–≥–æ–¥–Ω—è!
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```
–ú–µ–Ω—é ‚Üí –û–ø—Ü–∏—è 8
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–≤—ã—á–µ–∫
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
```
–ú–µ–Ω—é ‚Üí –û–ø—Ü–∏—è 10
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≤—ã—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å 2+ –¥–Ω—è
```

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç 5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫:
- –ó–∞—Ä—è–¥–∫–∞ (–°–ø–æ—Ä—Ç)
- –ú–µ–¥–∏—Ç–∞—Ü–∏—è (–ó–¥–æ—Ä–æ–≤—å–µ)
- –ß—Ç–µ–Ω–∏–µ (–£—á–µ–±–∞)
- –ë–µ–≥ (–°–ø–æ—Ä—Ç) - 3x/–Ω–µ–¥–µ–ª—é
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–µ–π (–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ) - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ

–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –ø—É–Ω–∫—Ç –º–µ–Ω—é "14. üöÄ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ"

## –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
```python
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç JOIN, COUNT, SUM, –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
SELECT 
    habits.name,
    COUNT(habit_logs.id) as total_days,
    SUM(CASE WHEN habit_logs.completed = 1 THEN 1 ELSE 0 END) as completed_days,
    ROUND(...) as success_rate
FROM habits
LEFT JOIN habit_logs ON habits.id = habit_logs.habit_id
WHERE habits.id = ? AND habit_logs.log_date BETWEEN ? AND ?
```

### –ü–æ–∏—Å–∫ —Å–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```python
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ROW_NUMBER() OVER –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
WITH streaks AS (
    SELECT 
        log_date,
        completed,
        ROW_NUMBER() OVER (ORDER BY log_date) - 
        ROW_NUMBER() OVER (PARTITION BY completed ORDER BY log_date) as streak_group
    FROM habit_logs
    WHERE habit_id = ? AND completed = 1
)
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–ø—Ä–∏–≤—ã—á–∫–∏, –Ω–µ –≤—ã–ø–æ–ª–Ω—è–≤—à–∏–µ—Å—è 2+ –¥–Ω—è)
```python
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç julianday() –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–∞–∑–Ω–∏—Ü—ã –≤ –¥–Ω—è—Ö
HAVING julianday(today) - julianday(MAX(log_date)) > 2
```

## –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- `habit_tracker.py` - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (~550 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
- `habits.db` - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
**–°—Ç—É–¥–µ–Ω—Ç: –ù–æ–≤–∏—Ö–∏–Ω –ú–∞–∫—Å–∏–º
## –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
